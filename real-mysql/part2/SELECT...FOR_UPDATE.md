
***select for update***

SELECT ... FOR UPDATE NOWAIT  
- 잠금 대상 레코드가 이미 다른 세션에 의해 잠겨있는 경우, 잠금을 대기하는 것이 아니라 바로 에러를 반환.    
- 트랜잭션 내에서 NOWAIT 쿼리를 실행하여 에러가 반환되더라도, 열어둔 트랜잭션은 그대로 유지됨.  

SELECT ... FOR UPDATE SKIP LOCKED  
- 잠금 대상 레코드 중에 다른 세션에 의해 이미 잠금이 걸려 있는 레코드는 스킵하고, 잠금이 걸려있지 않은 레코드를 잠그고 반환.  
- 따라서 잠금 대상 레코드가 비결정적으로 정해짐.  
- 잠금 대상 레코드들이 모두 잠금이 걸려있는 경우 빈 결과를 반환.
- ORDER BY & LIMIT 절과 함께 많이 사용됨.
